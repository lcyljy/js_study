<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>js array method2</title>
</head>

<body>
  <main>
    <h1>자바스크립트의 배열 메소드(loop iteration 속성이 있는 메소드)</h1>
    <p>배열의 메소드 중에 가장 유용한 3가지는 모두 반복문의 속성을 가진다.</p>
    <p>반복문 속성이 있는 배열의 메소드는 배열의 길이만큼 실행되고 실행될 때 익명함수를 재정의할 수 있는데 이 함수를 콜백 함수라 한다.</p>
    <p>Array.filter(콜백함수) : 콜백함수는 Array 길이만큼 실행된다.</p>
    <p>콜백함수 : function(value, index, self){return}</p>
    <article>
      <h2>forEach(function(value,index,self{}) : forEach는 배열의 길이만큼 콜백함수를 반복 실행된다.</h2>
      <p>forEach는 break;로 콜백함수 호출을 막을 수는 없다. (반복을 멈출 수 없다.)</p>
      <p>for(v of array){ if (v==false) break;}(o) forEach(()=>{break;})(x)</p>
      <p>forEach는 return을 작성해도 콜백함수는 호출된다. (반복을 멈출 수 없다.)</p>
      <p>function(){ for(v of array){ if(v==09)return false; }} : return 함수를 종료하기 때문에 반복문도 종료된다.</p>
      <p>forEach(function(v){return false;}) : 콜백함수는 return으로 종료되어도 배열의 길이만큼 다시 호출된다.</p>

      <ul>
        <li>["바나나킥","썬칩","빼빼로","오감자"].forEach(function(v,i){})
          <script>
            const a = ["바나나킥", "썬칩", "빼빼로", "오감자"];
            a.forEach(function(v, i, s) {
              document.write(`v : ${v} / i = ${i}`);
            });
            //for 작성
            for (let i = 0; i < a.length; i++) {
              console.log(`a[i]: ${a[i]} / i : ${i}`);
            }
          </script>
        </li>
        <li>Array.forEach(function(value,index,self){}) : </li>
        <li>Array.forEach(function(value,index){}) : </li>
        <li>Array.forEach(function(value){}) == for(value of Array)</li>
        <li>Array.forEach((value, index) => {})</li>
        <li>Array.forEach((value => {}) : 매개변수가 하나일 때 괄호도 생략 가능, 대괄호 생략은 return을 의미</li>
        <li>for을 이용해서 최소값찾기
          <script>
            const nums = [21, 110, -100, 30, 0, 13];
            // 최소값을 찾으세요
            let min = Infinity;
            //  for(let i =0; i<nums.length; i++){
            //   (min>nums[i]) ? min=nums[i] : min=min;
            //   console.log(`min : ${min}`);
            // }
          </script>
        </li>
        <li>forEach로 최소값 작성
          <script>
            //  nums.forEach(function(v,i){
            //   (v<min) ? min=v : min=min;
            //   console.log(v,i,min)
            // });
            // console.log(min);
          </script>
        </li>
        <li>forEach로 최대값 작성
          <script>
            //
            let max = -Infinity;
            // nums.forEach(function(v) {
            //   (v>max) ? max=v : max=max;
            //   console.log(v, max);
            // });
            // console.log(max);
          </script>
        </li>
        <li>forEach로 최소값 최대값 작성
          <script>
            nums.forEach((v) => {
              if (min > v) min = v;
              if (max < v) max = v;
            });
            console.log(max, min);
            // 최대값과 최소값을 동시에 구해서 좌우 끝으로 정렬하는 것을 칵테일 정렬이라한다.
            // 21,110,-100,30,0,13 (내림차순정렬)
          </script>
        </li>
        <li>nums의 합 구하기
          <script>
            //   let sum = 0;
            // nums.forEach(function(v) {
            //   sum +=v;
            //   console.log(v,sum);
            // });
            // console.log(sum);
          </script>
        </li>
        <li>[21, "십", 110, -100, 30, 0, "10", 13] forEach로 문자열인 value 삭제하기
          <script>
            let nums2 = [21, "십", 110, -100, 30, 0, "10", 13];
            // nums2.forEach(function(v,i) {
            //   (typeof v == "string") ? nums2.splice(i,1) : v = v;
            //   console.log(v,i);
            // })
            // console.log(nums2);
          </script>
        </li>
        <li>21,110,-100,30,0,10,13 forEach로 value들의 절대값 제곱인 새로운 배열을 만드세요(기존 배열 변경 가능)
          <script>

          </script>
        </li>


      </ul>
    </article>
    <article>
      <h2>map(배열의 값을 수정하는 함수)</h2>
      <p1>Array.map((value,index,self) => return changeValue}) : return 작성하면 해당 인덱스의 value가 바뀐다.</p1>
      <ul>
        <li>[-1,-3,-10].map(Math.abs);
          <script>
            const nums3 = [-1, -3, -10]
            let nums4 = nums3.map(Math.abs);
            document.write(nums4);
          </script>
        </li>

        <li>
          [-1,-3,-10].map(value=>value*value) :
          <script>
            // let nums5 = nums3.map(value=>value*value);
            let nums5 = nums3.map(value => Math.pow(Math.abs(value), 2));
            document.write(nums5);
          </script>
          <!-- <script>
            nums2.map((v,i,s)=> {
              return v+100;
            });
            console.log(nums2);
          </script> -->
        </li>
      </ul>
    </article>
    <article>
      <h2>filter() 조건에 통과한 배열 요소만 새로운 배열로 만든다.</h2>
      <p>Array.filter(function(v,i,s){return boolean})</p>
      <ul>
        <li>[-200, 100, -189, 40, -50, -0, -10, 20, 1].filter(v=>v>-11));
          <script>
            const nums6 = [-200, 100, -189, 400, -50, -0, -10, 20, 1]
            const test = function(v) {
              return v > 0;
            }
            console.log(nums6.filter(test));
            console.log(nums6.filter(function(v) {
              return v > -11
            }))
            console.log(nums6.filter((v) => {
              return v => 11
            }))
            document.write(nums6.filter(v => v > -11));
            //함수에 매개변수로 익명함수를 사용하는 이유는 가독성을 높이기 위함이다.

            // console.log(nums6);
            //value>0 큰 값만
          </script>
        </li>
        <li>[-200, "백", 100, 40, "-40", -50, -10, "십", 1].filter(v=>typeof v == "number")) :
          <script>
            const nums7 = [-200, "백", 100, 40, "-40", -50, -10, "십", 1]
            document.write(nums7.filter(v => typeof v == "number"));
          </script>
        </li>
        <li>
          [{name:"k",age:10},{name:"a",age:20},{name:"b",age:30},{name:"c",age:40},]
          <br>
          <script>
            const persons = [{
              name: "k",
              age: 10
            }, {
              name: "a",
              age: 20
            }, {
              name: "b",
              age: 30
            }, {
              name: "c",
              age: 40
            }, ]
            let over20_persons = persons.filter((v, i) => {
              // console.log(`JSON.stringify(v): ${JSON.stringify(v)} / i: ${i}`)
              return v.age > 20;
            });
            over20_persons.forEach((item) => {
              document.write(JSON.stringify(item));
            });
            console.log(over20_persons);
          </script>
        </li>
      </ul>
    </article>
    <article>
      <h2>every() : 배열의 모든 요소를 반복적으로 검사하는 함수(콜백함수)의 return의 결과 값이 모두 true일 때 true 반환</h2>
      <p>Array.every(function(v,i,s){return boolean}) ==> boolean</p>
      <p>하나라도 false가 있는지 검사하는 every(), 하나라도 false가 있으면 콜백함수 호출을 멈추고 false를 반환한다.</p>
      <p>a[0]>10 && a[1]>10 && a[2]>10 ... and 검사식</p>
      <ul>
        <li>[-200, 100, -189, 400, -50, -0, -10, 20, 1]의 값이 모두 100보다 작은지 검사 :
          forEach로 검사를 할 수 있지만 break없고 return 작성이 용이하지 않아서 검사식에 적절하지 않다.
          <br>
          <script>
            let testValue = 100;
            let testValueResult = true; // 한번이라도 false가 되면 반복문 중단 후 결과 출력
            nums6.forEach((v) => {

              if (v >= testValue) {
                testValueResult = false;
                document.write(`// testValueResult : ${testValueResult}`);
                // break;}
              }
            });
          </script>
        </li>

        <li>[-200, 100, -189, 400, -50, -0, -10, 20, 1].every(v=>v &lt; 100) <br>
          <script>
            let result = nums6.every(function(v, i, s) {
              return v < 100;
            });
            document.write(`result : ${result}`);
          </script>
        </li>
      </ul>
    </article>
    <article>
      <h2>some() : 배열의 모든 요소를 반복적으로 검사하는 함수(콜백함수)의 return의 결과 값이 하나라도 true일 때 true 반환</h2>
      <p>Array.some(function(v,i,s){return boolean}) ==> boolean</p>
      <p>하나라도 true가 있는지 검사하는 some(), 하나라도 true가 있으면 콜백함수 호출을 멈추고 true를 반환한다.</p>
      <p>a[0]>10 || a[1]>10 || a[2]>10 ... or 검사식</p>
      <ul>
        <li>[-200, 100, -189, 400, -50, -0, -10, 20, 1].some(v=> v &lt;= -200) :
          <script>
            let someResult = nums6.some(function(v) {
              return v <= -200
            });
            document.write(someResult);
          </script>
        </li>
        <li>[-200, 100, -189, 400, -50, -0, -10, 20, 1].foreach( V<= -200검사) <script>
            let forEachResult = "";
            nums6.forEach(function(v){
            if (v<=-200) { forEachResult=true; } else { forEachResult=false; } document.write(forEachResult); }); </script>
        </li>
      </ul>
    </article>
    <article>
      <h2>문제</h2>
      <ul>
        <li>총 점수를 구하세요<input id="btnTotal" type="button" value="총점"></li>
        <li>평균 점수를 구하세요<input id="btnAvg" type="button" value="평균"></li>
        <li>최소 점수를 구하세요<input id="btnMin" type="button" value="최소"></li>
        <li>최대 점수를 구하세요<input id="btnMax" type="button" value="최대"></li>
        <li>낙제가 있는지 찾으세요<input id="btnFff" type="button" value="낙제"></li>
        <li>만점이 있는지 찾으세요<input id="btnPerfect" type="button" value="만점"></li>
        <li>모든 점수를 100점 만점에서 4.5점 만점으로 변경하세요 <button id="btnUnivScore" type="button" name="univScore">4.5점 만점</button></li><button id="btnScore" type="button" name="score">100점 만점</button>
      </ul>
      <form name="someTestForm" action="index.html" method="post">
        <p><label>수학 점수 : <input type="number" class="score" name="m" value=70></label></p>
        <p><label>영어 점수 : <input type="number" class="score" name="e" value=90></label></p>
        <p><label>화학 점수 : <input type="number" class="score" name="c" value=100></label></p>
        <p><label>국사 점수 : <input type="number" class="score" name="h" value=30></label></p>
        <p><label>국어 점수 : <input type="number" class="score" name="k" value=70></label></p>
        <p><label>총 점수 : <input type="number" name="total" value="0" readonly></label></p>
        <p><label>평균 점수 : <input type="number" name="avg" value="0" readonly></label></p>
        <p><label>최소 점수 : <input type="number" name="min" value="0" readonly></label></p>
        <p><label>최대 점수 : <input type="number" name="max" value="0" readonly></label></p>
        <p><label>낙제가(v<50) 있는지(0/1) : <input type="number" name="is_f" value="0" readonly></label></p>
        <p><label>만점이 있는지(0/1) : <input type="number" name="is_ten" value="0" readonly></label></p>
      </form>
      <script>
        const someTestForm = document.forms["someTestForm"];
        const scores = someTestForm.querySelectorAll("[type=number].score");
        const scoreList = Array.from(scores); //domList를 array로 변경 => every,some,map 사용가능
        // scoreList.map (function(v){console.log(v)});
        console.log(scoreList);
        // console.log(scoreList);
        // scores.forEach((v, i) => {console.log(v);});

        //총점수 구하기
        // 1. 총점수가 입력되는 주소를 구한다. 해당 값에 나머지 과목의 점수들을 합한 값을 넣는다.
        // 2. 이때 위에 총점 점수를 눌렀을 때 동작하도록 만든다.
        let total = someTestForm.querySelector("[name=total]");
        let avg = someTestForm.querySelector("[name=avg]");
        let smin = someTestForm.querySelector("[name=min]");
        let smax = someTestForm.querySelector("[name=max]");
        let is_f = someTestForm.querySelector("[name=is_f]");
        let is_ten = someTestForm.querySelector("[name=is_ten]");
        console.log(total.value);

        const btnTotal = document.getElementById("btnTotal");
        console.log(btnTotal);
        btnTotal.addEventListener("click", function(e) {
          let testSum = 0;
          scoreList.forEach(function(v) {
            testSum += Number(v.value)
          })
          total.value = testSum;
        })

        const btnAvg = document.getElementById("btnAvg");
        console.log(btnAvg);
        btnAvg.addEventListener("click", function(e) {
          let testSum = 0;
          scoreList.forEach(function(v) {
            testSum += Number(v.value)
          })
          avg.value = testSum / scoreList.length;
        })


        const btnMin = document.getElementById("btnMin");
        console.log(btnMin);
        btnMin.addEventListener("click", function(e) {
              testMin = Infinity
              scoreList.forEach(function(v) {
                if (testMin > Number(v.value)) {
                  testMin = Number(v.value)
                }
                smin.value = testMin;
              });
            });


      const btnMax = document.getElementById("btnMax");
      console.log(btnMax);
      btnMax.addEventListener("click", function(e) {
            testMax = -Infinity
            scoreList.forEach(function(v) {
              if (testMax < Number(v.value)) {
                testMax = Number(v.value)
              }
              smax.value = testMax;
            });
          });

       const btnFff = document.getElementById("btnFff");
       console.log(btnFff);
       btnFff.addEventListener("click", function(e) {
            scoreList.forEach(function(v){
              if (Number(v.value)<50){
                is_f.value= 1;
              }
            })

           });

     const btnPerfect = document.getElementById("btnPerfect");
     console.log(btnFff);
     btnPerfect.addEventListener("click", function(e) {
          scoreList.forEach(function(v){
            if (Number(v.value)==100){
              is_ten.value= 1;
            }
          })
         });

      const btnUnivScore = document.getElementById("btnUnivScore");

      console.log(btnUnivScore);
      btnUnivScore.addEventListener("click", function(e) {
            for(i=0; i<scoreList.length; i++){
              if (scoreList[i].value > 4.5){
        scoreList[i].value = (scoreList[i].value*0.045).toFixed(2)
        }
        }
                });


    const btnScore = document.getElementById("btnScore");

    console.log(btnScore);
    btnScore.addEventListener("click", function(e) {
          for(i=0; i<scoreList.length; i++){
            if (scoreList[i].value>0 && scoreList[i].value <= 4.5 ) {
      scoreList[i].value = scoreList[i].value*1000/45
}
      }
              });
               // document.
              // scoreList
              // total.value =



              // console.log(someTestForm.querySelector("[name=total]").value) 총 점수의 위치 체크
              // let total = parseInt(someTestForm.querySelector("[name=total]").value);
              // console.log(total); //총점수 확인
              // console.log(someTestForm.querySelectorAll("[class=score]").length); //과목의 수
              // const btnTotal = document.getElementById('btnTotal');
              // console.log(btnTotal);
              // btnTotal.addEventListener("click", function(e){
              //
              //   for( i=0; i<someTestForm.querySelectorAll("[class=score]").length; i++) {
              //     total += parseInt(someTestForm.querySelectorAll("[class=score]")[i].value);
              //
              //   }
              // });

              // console.log(total);
      </script>
      <table class="grade">
        <thead>
        <tr>
          <th>과목</th>
          <th>점수</th>
          <th>4.5</th>
          <th>낙제</th>
          <th>만점</th>
          <th>성적</th>
        </tr>
        </thead>
        <tbody>
      <tr class="gradeM">
        <td>수학</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
      </tr>
      <tr class="gradeE">
        <td>영어</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
      </tr>
      <tr class="gradeC">
        <td>화학</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
      </tr>
      <tr class="gradeH">
        <td>국사</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
      </tr>
      <tr class="gradeK">
        <td>국어</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
      </tr>
      <tr>
        <td>총점수</td>
        <td>?</td>
        <td>평균</td>
        <td>?</td>
        <td>4.5평균</td>
        <td>?</td>
      </tr>
      </tbody>
      </table>
      <script>
        let subject = ["m","e","c","h","k"];
        console.log(subject);
        console.log(document.querySelectorAll(".gradeM td"));
        console.log(document.querySelectorAll(".gradeC td"));
        // 점수 : 수학~국어 점수 입력값을 가져다가. name=subject[i];
        // 점수 : 수학~국어 테이블 위치 ".grade"+i td[2] 에 넣기
        //
        // 총점
      </script>
    </article>
  </main>
</body>

</html>
